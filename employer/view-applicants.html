<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>View Applicants | Job Assist Ghana</title>
    <link rel="icon" type="image/png" href="tab-logo.png" />
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css"
    />
    <style>
      * {
        margin: 0;
        padding: 0;
        box-sizing: border-box;
        font-family:
          -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif;
      }

      :root {
        --primary: #0a2a66;
        --primary-light: #1e3a8a;
        --primary-dark: #071e4d;
        --secondary: #f8c12e;
        --light: #f8fafc;
        --dark: #1e293b;
        --gray: #64748b;
        --gray-light: #e2e8f0;
        --white: #ffffff;
        --success: #10b981;
        --danger: #ef4444;
      }

      body {
        background-color: var(--light);
        color: var(--dark);
        line-height: 1.4;
      }

      .container {
        max-width: 1400px;
        margin: 0 auto;
        padding: 0 30px;
      }

      /* Dark Blue Header Section */
      .header-section {
        background: linear-gradient(
          135deg,
          var(--primary-dark),
          var(--primary)
        );
        color: white;
        padding: 25px 0;
        margin-bottom: 30px;
      }

      .header {
        display: flex;
        justify-content: space-between;
        align-items: flex-start;
        margin-bottom: 25px;
        flex-wrap: wrap;
        gap: 20px;
      }

      /* Logo Section - Desktop */
      .logo-section {
        display: flex;
        align-items: flex-start;
        gap: 20px;
        flex: 1;
      }

      .logo-container {
        flex-shrink: 0;
      }

      .logo {
        height: 45px;
        width: auto;
        max-width: 180px;
        object-fit: contain;
      }

      .header-info {
        flex: 1;
        min-width: 0;
      }

      .header-info h1 {
        font-size: 1.6rem;
        color: white;
        font-weight: 700;
        margin-bottom: 8px;
        word-wrap: break-word;
        line-height: 1.3;
      }

      .job-meta {
        display: flex;
        gap: 25px;
        color: rgba(255, 255, 255, 0.9);
        font-size: 0.95rem;
        flex-wrap: wrap;
      }

      .header-actions {
        display: flex;
        gap: 15px;
        flex-wrap: wrap;
        align-items: flex-start;
      }

      .btn {
        padding: 10px 22px;
        border-radius: 6px;
        font-weight: 600;
        cursor: pointer;
        transition: all 0.2s ease;
        border: none;
        font-size: 0.95rem;
        display: flex;
        align-items: center;
        gap: 8px;
        white-space: nowrap;
      }

      .btn-back {
        background-color: var(--secondary);
        color: var(--primary);
        text-decoration: none;
      }

      .btn-back:hover {
        background-color: #e6af1a;
      }

      .btn-danger {
        background-color: var(--danger);
        color: white;
      }

      .btn-danger:hover {
        background-color: #dc2626;
      }

      /* Search in Dark Blue Section */
      .search-container {
        background: rgba(255, 255, 255, 0.1);
        border-radius: 8px;
        padding: 20px;
        backdrop-filter: blur(10px);
      }

      .search-box {
        position: relative;
      }

      .search-input {
        width: 100%;
        padding: 14px 18px 14px 50px;
        border: 1px solid rgba(255, 255, 255, 0.2);
        border-radius: 6px;
        font-size: 1rem;
        transition: all 0.2s ease;
        background-color: rgba(255, 255, 255, 0.95);
        color: var(--dark);
      }

      .search-input:focus {
        outline: none;
        border-color: var(--secondary);
        box-shadow: 0 0 0 3px rgba(248, 193, 46, 0.3);
        background-color: white;
      }

      .search-icon {
        position: absolute;
        left: 18px;
        top: 50%;
        transform: translateY(-50%);
        color: var(--gray);
      }

      /* Tabs */
      .tabs {
        display: flex;
        background: white;
        border-radius: 8px;
        overflow: hidden;
        margin-bottom: 30px;
        box-shadow: 0 2px 8px rgba(0, 0, 0, 0.05);
      }

      .tab {
        flex: 1;
        padding: 20px 25px;
        text-align: center;
        cursor: pointer;
        font-weight: 600;
        color: var(--gray);
        border-bottom: 3px solid transparent;
        transition: all 0.2s ease;
      }

      .tab.active {
        color: var(--primary);
        border-bottom-color: var(--secondary);
        background-color: rgba(248, 193, 46, 0.05);
      }

      .tab:hover:not(.active) {
        background-color: rgba(10, 42, 102, 0.02);
      }

      /* Tab Content */
      .tab-content {
        display: none;
      }

      .tab-content.active {
        display: block;
      }

      /* Section Header */
      .section-header {
        display: flex;
        justify-content: space-between;
        align-items: center;
        margin-bottom: 25px;
        flex-wrap: wrap;
        gap: 20px;
      }

      .section-title {
        font-size: 1.4rem;
        color: var(--primary);
        font-weight: 700;
      }

      .applicant-count {
        color: var(--gray);
        font-size: 1rem;
      }

      /* Checkout Summary */
      .checkout-summary {
        background: linear-gradient(
          135deg,
          var(--primary),
          var(--primary-light)
        );
        border-radius: 8px;
        padding: 25px;
        margin-bottom: 30px;
        display: none;
        color: white;
      }

      .checkout-summary.show {
        display: block;
      }

      .checkout-content {
        display: flex;
        justify-content: space-between;
        align-items: center;
        flex-wrap: wrap;
        gap: 25px;
      }

      .checkout-info {
        display: flex;
        align-items: center;
        gap: 30px;
        flex-wrap: wrap;
      }

      .selected-count {
        font-weight: 600;
        font-size: 1.1rem;
      }

      .total-amount {
        font-size: 1.5rem;
        font-weight: 800;
      }

      .checkout-actions {
        display: flex;
        gap: 15px;
        flex-wrap: wrap;
      }

      .btn-clear {
        background-color: rgba(255, 255, 255, 0.2);
        color: white;
        border: 1px solid rgba(255, 255, 255, 0.3);
      }

      .btn-clear:hover {
        background-color: rgba(255, 255, 255, 0.3);
      }

      .btn-accent {
        background-color: var(--secondary);
        color: var(--primary);
        font-weight: 700;
      }

      .btn-accent:hover {
        background-color: #e6af1a;
      }

      /* Applicants Grid - 3 Columns */
      .applicants-grid {
        display: grid;
        grid-template-columns: repeat(3, 1fr);
        gap: 20px;
        margin-bottom: 40px;
      }

      /* Applicant Card - All Applicants */
      .applicant-card {
        background: white;
        border: 1px solid var(--gray-light);
        border-radius: 8px;
        padding: 20px;
        transition: all 0.2s ease;
        cursor: pointer;
        display: flex;
        flex-direction: column;
        gap: 8px; /* Reduced from 10px */
      }

      .applicant-card:hover {
        border-color: var(--secondary);
        box-shadow: 0 4px 12px rgba(0, 0, 0, 0.08);
        transform: translateY(-2px);
      }

      .applicant-card.selected {
        border-color: var(--secondary);
        background-color: rgba(248, 193, 46, 0.05);
      }

      .card-header {
        display: flex;
        align-items: center;
        gap: 15px;
        margin-bottom: 3px; /* Reduced from 5px */
      }

      .card-avatar {
        width: 70px;
        height: 70px;
        border-radius: 6px;
        overflow: hidden;
        flex-shrink: 0;
      }

      .card-avatar img {
        width: 100%;
        height: 100%;
        object-fit: cover;
      }

      .card-name {
        flex: 1;
      }

      .applicant-name {
        font-size: 1.1rem;
        font-weight: 700;
        color: var(--primary);
        margin-bottom: 2px; /* Reduced from 3px */
      }

      .applicant-details {
        display: flex;
        flex-direction: column;
        gap: 4px; /* Reduced from 6px */
        font-size: 0.9rem;
      }

      .detail-row {
        display: flex;
        justify-content: space-between;
        align-items: center;
        padding: 2px 0; /* Reduced from 3px 0 */
        min-height: 22px; /* Added for consistent height */
      }

      .detail-label {
        color: var(--gray);
        font-size: 0.85rem;
      }

      .detail-value {
        color: var(--dark);
        font-weight: 600;
        text-align: right;
        font-size: 0.9rem;
      }

      .card-select {
        width: 22px;
        height: 22px;
        border: 2px solid var(--gray-light);
        border-radius: 4px;
        display: flex;
        align-items: center;
        justify-content: center;
        transition: all 0.2s ease;
        flex-shrink: 0;
        margin-left: 5px;
      }

      .applicant-card.selected .card-select {
        background-color: var(--secondary);
        border-color: var(--secondary);
      }

      .applicant-card.selected .card-select::after {
        content: "✓";
        color: white;
        font-size: 0.8rem;
        font-weight: bold;
      }

      /* Unlocked Applicant Card */
      .unlocked-card {
        background: white;
        border: 1px solid var(--gray-light);
        border-radius: 8px;
        padding: 20px;
        display: flex;
        flex-direction: column;
        gap: 8px; /* Reduced from 10px */
      }

      .unlocked-header {
        display: flex;
        align-items: center;
        gap: 15px;
        margin-bottom: 3px; /* Reduced from 5px */
      }

      .unlocked-avatar {
        width: 70px;
        height: 70px;
        border-radius: 6px;
        overflow: hidden;
        flex-shrink: 0;
      }

      .unlocked-avatar img {
        width: 100%;
        height: 100%;
        object-fit: cover;
      }

      .unlocked-name-section {
        flex: 1;
      }

      .unlocked-name {
        font-size: 1.1rem;
        font-weight: 700;
        color: var(--primary);
        margin-bottom: 3px; /* Reduced from 5px */
      }

      .contact-info {
        display: flex;
        flex-direction: column;
        gap: 2px; /* Reduced from 3px */
        font-size: 0.85rem;
        color: var(--gray);
      }

      .contact-item {
        display: flex;
        align-items: center;
        gap: 6px;
        min-height: 18px; /* Added for consistent height */
      }

      .contact-item i {
        width: 14px;
        color: var(--secondary);
      }

      .unlocked-details {
        display: flex;
        flex-direction: column;
        gap: 4px; /* Reduced from 6px */
        font-size: 0.9rem;
      }

      /* Pagination */
      .pagination {
        display: flex;
        justify-content: center;
        align-items: center;
        gap: 8px;
        margin: 40px 0 50px;
        flex-wrap: wrap;
      }

      .pagination-btn {
        padding: 10px 16px;
        border: 1px solid var(--gray-light);
        background-color: white;
        border-radius: 6px;
        cursor: pointer;
        transition: all 0.2s ease;
        font-size: 0.9rem;
        display: flex;
        align-items: center;
        gap: 6px;
        font-weight: 500;
        min-width: 40px;
        justify-content: center;
      }

      .pagination-btn:hover:not(.disabled) {
        border-color: var(--secondary);
        color: var(--primary);
      }

      .pagination-btn.active {
        background-color: var(--primary);
        color: white;
        border-color: var(--primary);
      }

      .pagination-btn.disabled {
        opacity: 0.5;
        cursor: not-allowed;
      }

      .pagination-info {
        font-size: 0.9rem;
        color: var(--gray);
        margin: 0 15px;
        font-weight: 500;
      }

      /* Empty State */
      .empty-state {
        text-align: center;
        padding: 60px 20px;
        color: var(--gray);
        grid-column: 1 / -1;
      }

      .empty-icon {
        font-size: 3rem;
        margin-bottom: 15px;
        color: var(--gray-light);
      }

      .empty-state h3 {
        font-size: 1.3rem;
        margin-bottom: 10px;
        color: var(--primary);
      }

      .empty-state p {
        font-size: 1rem;
        max-width: 400px;
        margin: 0 auto;
      }

      /* Modal */
      .modal-overlay {
        position: fixed;
        top: 0;
        left: 0;
        right: 0;
        bottom: 0;
        background-color: rgba(0, 0, 0, 0.5);
        display: none;
        align-items: center;
        justify-content: center;
        z-index: 1000;
        padding: 20px;
      }

      .modal-overlay.active {
        display: flex;
        animation: fadeIn 0.3s ease;
      }

      @keyframes fadeIn {
        from {
          opacity: 0;
        }
        to {
          opacity: 1;
        }
      }

      .modal-content {
        background-color: white;
        border-radius: 10px;
        padding: 30px;
        max-width: 500px;
        width: 100%;
        box-shadow: 0 10px 30px rgba(0, 0, 0, 0.2);
        transform: translateY(20px);
        animation: slideUp 0.3s ease forwards;
      }

      @keyframes slideUp {
        to {
          transform: translateY(0);
        }
      }

      .modal-header {
        display: flex;
        align-items: center;
        gap: 12px;
        margin-bottom: 20px;
      }

      .modal-icon {
        width: 50px;
        height: 50px;
        background-color: rgba(239, 68, 68, 0.1);
        border-radius: 50%;
        display: flex;
        align-items: center;
        justify-content: center;
        color: var(--danger);
        font-size: 1.5rem;
      }

      .modal-title {
        font-size: 1.5rem;
        color: var(--primary);
        font-weight: 700;
      }

      .modal-body {
        margin-bottom: 25px;
        color: var(--gray);
        line-height: 1.6;
      }

      .modal-body ul {
        padding-left: 20px;
        margin-top: 10px;
        margin-bottom: 15px;
      }

      .modal-body li {
        margin-bottom: 8px;
      }

      .modal-actions {
        display: flex;
        justify-content: flex-end;
        gap: 12px;
      }

      .btn-secondary {
        background-color: var(--gray-light);
        color: var(--dark);
      }

      .btn-secondary:hover {
        background-color: #d1d5db;
      }

      /* Mobile Responsiveness */
      @media (max-width: 1200px) {
        .applicants-grid {
          grid-template-columns: repeat(2, 1fr);
        }
      }

      @media (max-width: 992px) {
        .container {
          padding: 0 20px;
        }

        .header-section {
          padding: 20px 0;
        }

        .applicants-grid {
          grid-template-columns: repeat(2, 1fr);
        }
      }

      @media (max-width: 768px) {
        .container {
          padding: 0 15px;
        }

        /* FIX 1: TOP SECTION LAYOUT - Improved spacing and flow */
        .header-section {
          padding: 20px 0;
          margin-bottom: 25px;
        }

        /* Ensure proper stacking order and spacing */
        .header {
          display: flex;
          flex-direction: column;
          align-items: stretch;
          margin-bottom: 20px;
          gap: 20px;
        }

        /* Logo section - Page title + job info */
        .logo-section {
          display: flex;
          flex-direction: column;
          align-items: flex-start;
          gap: 15px;
          width: 100%;
          order: 1;
        }

        .logo-container {
          align-self: flex-start;
        }

        .logo {
          height: 40px;
          max-width: 160px;
        }

        .header-info {
          width: 100%;
        }

        .header-info h1 {
          font-size: 1.3rem;
          margin-bottom: 10px;
          color: white;
        }

        .job-meta {
          display: flex;
          flex-direction: column;
          gap: 8px;
          margin-top: 5px;
          font-size: 0.9rem;
          color: rgba(255, 255, 255, 0.9);
        }

        /* FIX: Header actions - Buttons with better spacing */
        .header-actions {
          display: flex;
          flex-direction: column;
          width: 100%;
          gap: 12px;
          order: 2;
          margin-top: 5px;
        }

        .header-actions .btn {
          width: 100%;
          justify-content: center;
          padding: 14px 16px;
          font-size: 0.95rem;
          margin: 0;
        }

        /* Search container - Proper spacing */
        .search-container {
          padding: 20px;
          margin-top: 5px;
          order: 3;
        }

        .search-input {
          padding: 14px 16px 14px 45px;
          font-size: 0.95rem;
        }

        .search-icon {
          left: 15px;
        }

        /* Tabs - Stack vertically */
        .tabs {
          flex-direction: column;
          margin-bottom: 25px;
        }

        .tab {
          text-align: left;
          padding: 18px 20px;
        }

        /* Applicants Grid - Single column */
        .applicants-grid {
          grid-template-columns: 1fr;
          gap: 18px;
          margin-bottom: 35px;
        }

        /* Cards - Keep current design */
        .applicant-card,
        .unlocked-card {
          padding: 18px;
          width: 100%;
          box-sizing: border-box;
        }

        .card-header,
        .unlocked-header {
          gap: 15px;
        }

        .card-avatar,
        .unlocked-avatar {
          width: 65px;
          height: 65px;
        }

        /* Section header */
        .section-header {
          flex-direction: column;
          align-items: flex-start;
          gap: 10px;
          margin-bottom: 20px;
        }

        /* Checkout summary */
        .checkout-summary {
          padding: 20px;
          margin-bottom: 25px;
        }

        .checkout-content {
          flex-direction: column;
          align-items: stretch;
          gap: 20px;
        }

        .checkout-info {
          flex-direction: column;
          gap: 15px;
          align-items: flex-start;
        }

        .checkout-actions {
          width: 100%;
          flex-direction: column;
          gap: 12px;
        }

        .checkout-actions .btn {
          width: 100%;
          justify-content: center;
          padding: 14px 16px;
        }

        /* Pagination */
        .pagination {
          margin: 30px 0 40px;
          gap: 8px;
        }

        /* Modal adjustments */
        .modal-overlay {
          padding: 15px;
        }

        .modal-content {
          padding: 25px;
        }

        .modal-actions {
          flex-direction: column;
          gap: 10px;
        }

        .modal-actions .btn {
          width: 100%;
          justify-content: center;
        }
      }

      @media (max-width: 480px) {
        .container {
          padding: 0 12px;
        }

        /* Adjust top section for very small screens */
        .header-section {
          padding: 18px 0;
        }

        .header-info h1 {
          font-size: 1.2rem;
        }

        .job-meta {
          font-size: 0.85rem;
          gap: 6px;
        }

        .header-actions .btn {
          padding: 13px 15px;
          font-size: 0.9rem;
        }

        .search-container {
          padding: 18px;
        }

        .search-input {
          padding: 13px 15px 13px 45px;
          font-size: 0.9rem;
        }

        .applicant-card,
        .unlocked-card {
          padding: 16px;
        }
      }

      /* Very small screens */
      @media (max-width: 360px) {
        .header-info h1 {
          font-size: 1.1rem;
        }

        .header-actions .btn {
          padding: 12px 14px;
        }
      }
    </style>
  </head>
  <body>
    <!-- Dark Blue Header Section -->
    <div class="header-section">
      <div class="container">
        <!-- Header -->
        <header class="header">
          <div class="logo-section">
            <div class="logo-container">
              <img src="logo.png" alt="JobAssist Ghana" class="logo" />
            </div>
            <div class="header-info">
              <h1>
                Applicants for <span id="jobTitle">Frontend Developer</span>
              </h1>
              <div class="job-meta">
                <span class="post-date"
                  >Posted on <span id="postDate">15 May 2023</span></span
                >
                <span class="applicant-total"
                  ><span id="applicantCount">12</span> Applicants</span
                >
              </div>
            </div>
          </div>
          <div class="header-actions">
            <a href="my-job-post.html" class="btn btn-back">
              <i class="fas fa-arrow-left"></i> Back
            </a>
            <button class="btn btn-danger" id="closeJobBtn">
              <i class="fas fa-times-circle"></i> Close Job
            </button>
          </div>
        </header>

        <!-- Search -->
        <div class="search-container">
          <div class="search-box">
            <i class="fas fa-search search-icon"></i>
            <input
              type="text"
              class="search-input"
              placeholder="Search by name, field, or region..."
              id="searchInput"
            />
          </div>
        </div>
      </div>
    </div>

    <div class="container">
      <!-- Checkout Summary -->
      <div class="checkout-summary" id="checkoutSummary">
        <div class="checkout-content">
          <div class="checkout-info">
            <div class="selected-count">
              <span id="selectedCount">0</span> applicants selected
            </div>
            <div class="total-amount">
              Total: <span id="totalAmount">₵0.00</span>
            </div>
          </div>
          <div class="checkout-actions">
            <button class="btn btn-clear" id="clearSelectionBtn">
              <i class="fas fa-times"></i> Clear
            </button>
            <button class="btn btn-accent" id="proceedToPaymentBtn">
              <i class="fas fa-unlock"></i> Unlock Selected
            </button>
          </div>
        </div>
      </div>

      <!-- Tabs -->
      <div class="tabs">
        <div class="tab active" data-tab="all-applicants">All Applicants</div>
        <div class="tab" data-tab="unlocked-applicants">
          Unlocked Applicants
        </div>
      </div>

      <!-- All Applicants Tab -->
      <div class="tab-content active" id="all-applicants-tab">
        <div class="section-header">
          <h2 class="section-title">All Applicants</h2>
          <div class="applicant-count">
            <span id="applicantCountHeader">12</span> applicants
          </div>
        </div>

        <div class="applicants-grid" id="applicantsGrid">
          <!-- Applicant cards will be loaded here -->
        </div>

        <div class="pagination" id="pagination">
          <!-- Pagination will be loaded here -->
        </div>
      </div>

      <!-- Unlocked Applicants Tab -->
      <div class="tab-content" id="unlocked-applicants-tab">
        <div class="section-header">
          <h2 class="section-title">Unlocked Applicants</h2>
          <div class="applicant-count">
            <span id="unlockedCount">3</span> unlocked
          </div>
        </div>

        <div class="applicants-grid" id="unlockedApplicantsGrid">
          <!-- Example unlocked cards (will be replaced by dynamic data) -->
          <div class="unlocked-card">
            <div class="unlocked-header">
              <div class="unlocked-avatar">
                <img
                  src="https://i.pravatar.cc/150?img=1"
                  alt="Kwame Appiah 1"
                />
              </div>
              <div class="unlocked-name-section">
                <div class="unlocked-name">Kwame Appiah 1</div>
                <div class="contact-info">
                  <div class="contact-item">
                    <i class="fas fa-envelope"></i> applicant1@email.com
                  </div>
                  <div class="contact-item">
                    <i class="fas fa-phone"></i> +233 51 1000001
                  </div>
                </div>
              </div>
            </div>
            <div class="unlocked-details">
              <div class="detail-row">
                <span class="detail-label">Gender:</span>
                <span class="detail-value">Male</span>
              </div>
              <div class="detail-row">
                <span class="detail-label">Experience:</span>
                <span class="detail-value">1-2 years</span>
              </div>
              <div class="detail-row">
                <span class="detail-label">Field of Study:</span>
                <span class="detail-value">Computer Science</span>
              </div>
              <div class="detail-row">
                <span class="detail-label">Region:</span>
                <span class="detail-value">Ashanti</span>
              </div>
              <div class="detail-row">
                <span class="detail-label">Willing to Relocate:</span>
                <span class="detail-value">Yes</span>
              </div>
              <div class="detail-row">
                <span class="detail-label">Are you disabled?:</span>
                <span class="detail-value">No</span>
              </div>
              <div class="detail-row">
                <span class="detail-label">Digital Address:</span>
                <span class="detail-value">GA-101-2001</span>
              </div>
              <div class="detail-row">
                <span class="detail-label">Ghana Card:</span>
                <span class="detail-value">GHA-1000000001-1</span>
              </div>
            </div>
          </div>

          <div class="unlocked-card">
            <div class="unlocked-header">
              <div class="unlocked-avatar">
                <img
                  src="https://i.pravatar.cc/150?img=2"
                  alt="Kwame Appiah 2"
                />
              </div>
              <div class="unlocked-name-section">
                <div class="unlocked-name">Kwame Appiah 2</div>
                <div class="contact-info">
                  <div class="contact-item">
                    <i class="fas fa-envelope"></i> applicant2@email.com
                  </div>
                  <div class="contact-item">
                    <i class="fas fa-phone"></i> +233 52 1000002
                  </div>
                </div>
              </div>
            </div>
            <div class="unlocked-details">
              <div class="detail-row">
                <span class="detail-label">Gender:</span>
                <span class="detail-value">Female</span>
              </div>
              <div class="detail-row">
                <span class="detail-label">Experience:</span>
                <span class="detail-value">3-4 years</span>
              </div>
              <div class="detail-row">
                <span class="detail-label">Field of Study:</span>
                <span class="detail-value">Software Engineering</span>
              </div>
              <div class="detail-row">
                <span class="detail-label">Region:</span>
                <span class="detail-value">Western</span>
              </div>
              <div class="detail-row">
                <span class="detail-label">Willing to Relocate:</span>
                <span class="detail-value">Yes</span>
              </div>
              <div class="detail-row">
                <span class="detail-label">Are you disabled?:</span>
                <span class="detail-value">No</span>
              </div>
              <div class="detail-row">
                <span class="detail-label">Digital Address:</span>
                <span class="detail-value">GA-102-2002</span>
              </div>
              <div class="detail-row">
                <span class="detail-label">Ghana Card:</span>
                <span class="detail-value">GHA-1000000002-2</span>
              </div>
            </div>
          </div>

          <div class="unlocked-card">
            <div class="unlocked-header">
              <div class="unlocked-avatar">
                <img
                  src="https://i.pravatar.cc/150?img=3"
                  alt="Kwame Appiah 3"
                />
              </div>
              <div class="unlocked-name-section">
                <div class="unlocked-name">Kwame Appiah 3</div>
                <div class="contact-info">
                  <div class="contact-item">
                    <i class="fas fa-phone"></i> +233 53 1000003
                  </div>
                </div>
              </div>
            </div>
            <div class="unlocked-details">
              <div class="detail-row">
                <span class="detail-label">Gender:</span>
                <span class="detail-value">Male</span>
              </div>
              <div class="detail-row">
                <span class="detail-label">Experience:</span>
                <span class="detail-value">5+ years</span>
              </div>
              <div class="detail-row">
                <span class="detail-label">Field of Study:</span>
                <span class="detail-value">Computer Engineering</span>
              </div>
              <div class="detail-row">
                <span class="detail-label">Region:</span>
                <span class="detail-value">Central</span>
              </div>
              <div class="detail-row">
                <span class="detail-label">Willing to Relocate:</span>
                <span class="detail-value">No</span>
              </div>
              <div class="detail-row">
                <span class="detail-label">Are you disabled?:</span>
                <span class="detail-value">No</span>
              </div>
              <div class="detail-row">
                <span class="detail-label">Digital Address:</span>
                <span class="detail-value">GA-103-2003</span>
              </div>
              <div class="detail-row">
                <span class="detail-label">Ghana Card:</span>
                <span class="detail-value">GHA-1000000003-3</span>
              </div>
            </div>
          </div>
        </div>

        <div class="pagination" id="unlockedPagination">
          <!-- Pagination will be loaded here -->
        </div>
      </div>
    </div>

    <!-- Modal for Closing Job -->
    <div class="modal-overlay" id="closeJobModal">
      <div class="modal-content">
        <div class="modal-header">
          <div class="modal-icon">
            <i class="fas fa-exclamation-triangle"></i>
          </div>
          <h3 class="modal-title">Close Job Listing</h3>
        </div>
        <div class="modal-body">
          <p>Are you sure you want to close this job listing? This will:</p>
          <ul>
            <li>Stop receiving new applications</li>
            <li>Remove the job from public search results</li>
            <li>Keep existing applicants visible</li>
          </ul>
          <p style="color: var(--danger); font-weight: 600; margin-top: 15px">
            This action cannot be undone.
          </p>
        </div>
        <div class="modal-actions">
          <button class="btn btn-secondary" id="cancelCloseBtn">Cancel</button>
          <button class="btn btn-danger" id="confirmCloseBtn">
            Close Job Listing
          </button>
        </div>
      </div>
    </div>

    <script>
      // DOM Elements
      const tabs = document.querySelectorAll(".tab");
      const tabContents = document.querySelectorAll(".tab-content");
      const checkoutSummary = document.getElementById("checkoutSummary");
      const selectedCount = document.getElementById("selectedCount");
      const totalAmount = document.getElementById("totalAmount");
      const clearSelectionBtn = document.getElementById("clearSelectionBtn");
      const proceedToPaymentBtn = document.getElementById(
        "proceedToPaymentBtn",
      );
      const applicantsGrid = document.getElementById("applicantsGrid");
      const unlockedApplicantsGrid = document.getElementById(
        "unlockedApplicantsGrid",
      );
      const pagination = document.getElementById("pagination");
      const unlockedPagination = document.getElementById("unlockedPagination");
      const jobTitleElement = document.getElementById("jobTitle");
      const postDate = document.getElementById("postDate");
      const applicantCount = document.getElementById("applicantCount");
      const applicantCountHeader = document.getElementById(
        "applicantCountHeader",
      );
      const unlockedCount = document.getElementById("unlockedCount");
      const searchInput = document.getElementById("searchInput");
      const closeJobBtn = document.getElementById("closeJobBtn");
      const closeJobModal = document.getElementById("closeJobModal");
      const cancelCloseBtn = document.getElementById("cancelCloseBtn");
      const confirmCloseBtn = document.getElementById("confirmCloseBtn");

      // Constants - UPDATED PRICE TO 50 CEDIS
      const APPLICANT_PRICE = 50;
      const APPLICANTS_PER_PAGE = 12;
      let allApplicants = [];
      let unlockedApplicants = [];
      let filteredApplicants = [];
      let filteredUnlockedApplicants = [];
      let selectedApplicants = new Set();
      let currentPage = 1;
      let currentUnlockedPage = 1;
      let currentJobId = 1;

      // Generate sample data
      function generateApplicants(count) {
        const regions = [
          "Greater Accra",
          "Ashanti",
          "Western",
          "Central",
          "Eastern",
          "Volta",
          "Northern",
          "Upper East",
          "Upper West",
        ];
        const fields = [
          "Computer Science",
          "Software Engineering",
          "Information Technology",
          "Computer Engineering",
          "Web Development",
          "UX/UI Design",
        ];
        const experienceLevels = ["1-2 years", "3-4 years", "5+ years"];

        const applicants = [];

        for (let i = 1; i <= count; i++) {
          const hasEmail = i % 3 !== 0;
          const hasPhone = i % 5 !== 0;
          const hasDigitalAddress = i % 4 !== 0;

          applicants.push({
            id: i,
            name: `Applicant ${i}`,
            fullName: `Kwame Appiah ${i}`,
            email: hasEmail ? `applicant${i}@email.com` : "",
            phone: hasPhone ? `+233 ${50 + (i % 50)} ${1000000 + i}` : "",
            avatar: `https://i.pravatar.cc/150?img=${(i % 70) + 1}`,
            gender: i % 2 === 0 ? "Female" : "Male",
            ghanaCardNumber: `GHA-${1000000000 + i}-${i % 10}`,
            digitalAddress: hasDigitalAddress
              ? `GA-${100 + (i % 900)}-${2000 + i}`
              : "Not provided",
            region: regions[i % regions.length],
            willingToRelocate: i % 3 === 0 ? "No" : "Yes",
            fieldOfStudy: fields[i % fields.length],
            experienceLevel: experienceLevels[i % experienceLevels.length],
            disabilityStatus: i % 10 === 0 ? "Yes" : "No",
            unlocked: i <= 3, // First 3 are unlocked for demo
          });
        }

        return applicants;
      }

      // Initialize page
      document.addEventListener("DOMContentLoaded", function () {
        // Check URL parameters
        const urlParams = new URLSearchParams(window.location.search);
        const jobId = urlParams.get("jobId") || "1";
        currentJobId = parseInt(jobId);

        // Generate sample data
        const allGenerated = generateApplicants(35);
        allApplicants = allGenerated.filter((app) => !app.unlocked);
        unlockedApplicants = allGenerated.filter((app) => app.unlocked);

        // Initialize filtered arrays
        filteredApplicants = [...allApplicants];
        filteredUnlockedApplicants = [...unlockedApplicants];

        // Load initial data
        loadJobData();
        renderApplicants();
        renderUnlockedApplicants();
        setupPagination();
        setupUnlockedPagination();

        // Setup event listeners
        setupEventListeners();

        // Check for payment success
        const paymentSuccess = urlParams.get("payment_success");
        if (paymentSuccess === "true") {
          moveApplicantsToUnlocked();
          switchTab("unlocked-applicants");
          const newUrl = window.location.pathname + "?jobId=" + jobId;
          window.history.replaceState({}, document.title, newUrl);
        }
      });

      function loadJobData() {
        // Update counts
        const totalApplicants =
          allApplicants.length + unlockedApplicants.length;
        applicantCount.textContent = totalApplicants;
        applicantCountHeader.textContent = allApplicants.length;
        unlockedCount.textContent = unlockedApplicants.length;
        postDate.textContent = "15 May 2023";
        jobTitleElement.textContent = "Frontend Developer";
      }

      function renderApplicants() {
        applicantsGrid.innerHTML = "";

        // Calculate pagination
        const startIndex = (currentPage - 1) * APPLICANTS_PER_PAGE;
        const endIndex = Math.min(
          startIndex + APPLICANTS_PER_PAGE,
          filteredApplicants.length,
        );
        const pageApplicants = filteredApplicants.slice(startIndex, endIndex);

        if (pageApplicants.length === 0) {
          applicantsGrid.innerHTML = `
                    <div class="empty-state">
                        <div class="empty-icon">
                            <i class="fas fa-users"></i>
                        </div>
                        <h3>No applicants found</h3>
                        <p>${
                          filteredApplicants.length === 0 &&
                          allApplicants.length > 0
                            ? "No applicants match your search"
                            : "No applicants have applied to this job yet"
                        }</p>
                    </div>
                `;
          return;
        }

        pageApplicants.forEach((applicant) => {
          const card = document.createElement("div");
          card.className = `applicant-card ${selectedApplicants.has(applicant.id) ? "selected" : ""}`;
          card.dataset.id = applicant.id;

          card.innerHTML = `
                    <div class="card-header">
                        <div class="card-avatar">
                            <img src="${applicant.avatar}" alt="${applicant.name}">
                        </div>
                        <div class="card-name">
                            <div class="applicant-name">${applicant.name}</div>
                        </div>
                        <div class="card-select"></div>
                    </div>
                    <div class="applicant-details">
                        <div class="detail-row">
                            <span class="detail-label">Gender:</span>
                            <span class="detail-value">${applicant.gender}</span>
                        </div>
                        <div class="detail-row">
                            <span class="detail-label">Experience:</span>
                            <span class="detail-value">${applicant.experienceLevel}</span>
                        </div>
                        <div class="detail-row">
                            <span class="detail-label">Field of Study:</span>
                            <span class="detail-value">${applicant.fieldOfStudy}</span>
                        </div>
                        <div class="detail-row">
                            <span class="detail-label">Region:</span>
                            <span class="detail-value">${applicant.region}</span>
                        </div>
                        <div class="detail-row">
                            <span class="detail-label">Willing to Relocate:</span>
                            <span class="detail-value">${applicant.willingToRelocate}</span>
                        </div>
                        <div class="detail-row">
                            <span class="detail-label">Are you disabled?:</span>
                            <span class="detail-value">${applicant.disabilityStatus}</span>
                        </div>
                    </div>
                `;

          card.addEventListener("click", () =>
            toggleApplicantSelection(applicant.id),
          );
          applicantsGrid.appendChild(card);
        });
      }

      function renderUnlockedApplicants() {
        unlockedApplicantsGrid.innerHTML = "";

        // Calculate pagination for unlocked
        const startIndex = (currentUnlockedPage - 1) * APPLICANTS_PER_PAGE;
        const endIndex = Math.min(
          startIndex + APPLICANTS_PER_PAGE,
          filteredUnlockedApplicants.length,
        );
        const pageApplicants = filteredUnlockedApplicants.slice(
          startIndex,
          endIndex,
        );

        if (pageApplicants.length === 0) {
          unlockedApplicantsGrid.innerHTML = `
                    <div class="empty-state">
                        <div class="empty-icon">
                            <i class="fas fa-unlock"></i>
                        </div>
                        <h3>No unlocked applicants</h3>
                        <p>${
                          filteredUnlockedApplicants.length === 0 &&
                          unlockedApplicants.length > 0
                            ? "No unlocked applicants match your search"
                            : 'Unlock applicants from the "All Applicants" tab to view their details here'
                        }</p>
                    </div>
                `;
          return;
        }

        pageApplicants.forEach((applicant) => {
          const card = document.createElement("div");
          card.className = "unlocked-card";

          // Build contact info
          let contactInfo = "";
          if (applicant.email) {
            contactInfo += `<div class="contact-item"><i class="fas fa-envelope"></i> ${applicant.email}</div>`;
          }
          if (applicant.phone) {
            contactInfo += `<div class="contact-item"><i class="fas fa-phone"></i> ${applicant.phone}</div>`;
          }

          card.innerHTML = `
                    <div class="unlocked-header">
                        <div class="unlocked-avatar">
                            <img src="${applicant.avatar}" alt="${applicant.fullName}">
                        </div>
                        <div class="unlocked-name-section">
                            <div class="unlocked-name">${applicant.fullName}</div>
                            <div class="contact-info">${contactInfo}</div>
                        </div>
                    </div>
                    <div class="unlocked-details">
                        <div class="detail-row">
                            <span class="detail-label">Gender:</span>
                            <span class="detail-value">${applicant.gender}</span>
                        </div>
                        <div class="detail-row">
                            <span class="detail-label">Experience:</span>
                            <span class="detail-value">${applicant.experienceLevel}</span>
                        </div>
                        <div class="detail-row">
                            <span class="detail-label">Field of Study:</span>
                            <span class="detail-value">${applicant.fieldOfStudy}</span>
                        </div>
                        <div class="detail-row">
                            <span class="detail-label">Region:</span>
                            <span class="detail-value">${applicant.region}</span>
                        </div>
                        <div class="detail-row">
                            <span class="detail-label">Willing to Relocate:</span>
                            <span class="detail-value">${applicant.willingToRelocate}</span>
                        </div>
                        <div class="detail-row">
                            <span class="detail-label">Are you disabled?:</span>
                            <span class="detail-value">${applicant.disabilityStatus}</span>
                        </div>
                        <div class="detail-row">
                            <span class="detail-label">Digital Address:</span>
                            <span class="detail-value">${applicant.digitalAddress}</span>
                        </div>
                        <div class="detail-row">
                            <span class="detail-label">Ghana Card:</span>
                            <span class="detail-value">${applicant.ghanaCardNumber}</span>
                        </div>
                    </div>
                `;

          unlockedApplicantsGrid.appendChild(card);
        });
      }

      function setupPagination() {
        pagination.innerHTML = "";

        const totalPages = Math.ceil(
          filteredApplicants.length / APPLICANTS_PER_PAGE,
        );

        if (totalPages <= 1) return;

        // Previous button
        const prevButton = document.createElement("button");
        prevButton.className = `pagination-btn ${currentPage === 1 ? "disabled" : ""}`;
        prevButton.innerHTML = '<i class="fas fa-chevron-left"></i> Previous';
        prevButton.addEventListener("click", () => {
          if (currentPage > 1) {
            currentPage--;
            renderApplicants();
            setupPagination();
          }
        });
        pagination.appendChild(prevButton);

        // Page numbers
        const maxVisiblePages = 5;
        let startPage = Math.max(
          1,
          currentPage - Math.floor(maxVisiblePages / 2),
        );
        let endPage = Math.min(totalPages, startPage + maxVisiblePages - 1);

        if (endPage - startPage + 1 < maxVisiblePages) {
          startPage = Math.max(1, endPage - maxVisiblePages + 1);
        }

        for (let i = startPage; i <= endPage; i++) {
          const pageButton = document.createElement("button");
          pageButton.className = `pagination-btn ${i === currentPage ? "active" : ""}`;
          pageButton.textContent = i;
          pageButton.addEventListener("click", () => {
            currentPage = i;
            renderApplicants();
            setupPagination();
          });
          pagination.appendChild(pageButton);
        }

        // Next button
        const nextButton = document.createElement("button");
        nextButton.className = `pagination-btn ${currentPage === totalPages ? "disabled" : ""}`;
        nextButton.innerHTML = 'Next <i class="fas fa-chevron-right"></i>';
        nextButton.addEventListener("click", () => {
          if (currentPage < totalPages) {
            currentPage++;
            renderApplicants();
            setupPagination();
          }
        });
        pagination.appendChild(nextButton);

        // Page info
        const pageInfo = document.createElement("div");
        pageInfo.className = "pagination-info";
        pageInfo.textContent = `Page ${currentPage} of ${totalPages}`;
        pagination.appendChild(pageInfo);
      }

      function setupUnlockedPagination() {
        unlockedPagination.innerHTML = "";

        const totalPages = Math.ceil(
          filteredUnlockedApplicants.length / APPLICANTS_PER_PAGE,
        );

        if (totalPages <= 1) return;

        // Previous button
        const prevButton = document.createElement("button");
        prevButton.className = `pagination-btn ${currentUnlockedPage === 1 ? "disabled" : ""}`;
        prevButton.innerHTML = '<i class="fas fa-chevron-left"></i> Previous';
        prevButton.addEventListener("click", () => {
          if (currentUnlockedPage > 1) {
            currentUnlockedPage--;
            renderUnlockedApplicants();
            setupUnlockedPagination();
          }
        });
        unlockedPagination.appendChild(prevButton);

        // Page numbers
        const maxVisiblePages = 5;
        let startPage = Math.max(
          1,
          currentUnlockedPage - Math.floor(maxVisiblePages / 2),
        );
        let endPage = Math.min(totalPages, startPage + maxVisiblePages - 1);

        if (endPage - startPage + 1 < maxVisiblePages) {
          startPage = Math.max(1, endPage - maxVisiblePages + 1);
        }

        for (let i = startPage; i <= endPage; i++) {
          const pageButton = document.createElement("button");
          pageButton.className = `pagination-btn ${i === currentUnlockedPage ? "active" : ""}`;
          pageButton.textContent = i;
          pageButton.addEventListener("click", () => {
            currentUnlockedPage = i;
            renderUnlockedApplicants();
            setupUnlockedPagination();
          });
          unlockedPagination.appendChild(pageButton);
        }

<<<<<<< HEAD:view-applicants.html
        // Next button
        const nextButton = document.createElement("button");
        nextButton.className = `pagination-btn ${currentUnlockedPage === totalPages ? "disabled" : ""}`;
        nextButton.innerHTML = 'Next <i class="fas fa-chevron-right"></i>';
        nextButton.addEventListener("click", () => {
          if (currentUnlockedPage < totalPages) {
            currentUnlockedPage++;
            renderUnlockedApplicants();
            setupUnlockedPagination();
          }
        });
        unlockedPagination.appendChild(nextButton);

        // Page info
        const pageInfo = document.createElement("div");
        pageInfo.className = "pagination-info";
        pageInfo.textContent = `Page ${currentUnlockedPage} of ${totalPages}`;
        unlockedPagination.appendChild(pageInfo);
      }

      function toggleApplicantSelection(applicantId) {
        if (selectedApplicants.has(applicantId)) {
          selectedApplicants.delete(applicantId);
        } else {
          selectedApplicants.add(applicantId);
=======
        function setupEventListeners() {
            // Tab switching
            tabs.forEach(tab => {
                tab.addEventListener('click', () => {
                    const tabId = tab.dataset.tab;
                    switchTab(tabId);
                });
            });
            
            // Clear selection
            clearSelectionBtn.addEventListener('click', () => {
                selectedApplicants.clear();
                document.querySelectorAll('.applicant-card').forEach(card => {
                    card.classList.remove('selected');
                });
                updateCheckoutSummary();
            });
            
            // Proceed to payment - FIXED PAYMENT DATA PASSING
            proceedToPaymentBtn.addEventListener('click', () => {
                if (selectedApplicants.size === 0) {
                    showToast('Please select at least one applicant to unlock');
                    return;
                }
                
                // Calculate total amount
                const totalAmount = selectedApplicants.size * APPLICANT_PRICE;
                
                // Store payment data in sessionStorage
                const paymentData = {
                    jobId: currentJobId,
                    jobTitle: jobTitleElement.textContent,
                    amount: totalAmount,
                    selectedCount: selectedApplicants.size,
                    applicantPrice: APPLICANT_PRICE,
                    selectedApplicants: Array.from(selectedApplicants),
                    timestamp: new Date().toISOString()
                };
                
                // Store in sessionStorage for payment page
                sessionStorage.setItem('jobassist_payment_data', JSON.stringify(paymentData));
                
                // Redirect to payment page
                window.location.href = `employer-payment.html?jobId=${currentJobId}&amount=${totalAmount}&count=${selectedApplicants.size}`;
            });
            
            // Search
            searchInput.addEventListener('input', () => {
                const searchTerm = searchInput.value.toLowerCase().trim();
                
                // Filter all applicants
                filteredApplicants = allApplicants.filter(applicant => 
                    matchesSearch(applicant, searchTerm)
                );
                
                // Filter unlocked applicants
                filteredUnlockedApplicants = unlockedApplicants.filter(applicant => 
                    matchesSearch(applicant, searchTerm)
                );
                
                // Reset to first page
                currentPage = 1;
                currentUnlockedPage = 1;
                
                // Re-render
                renderApplicants();
                renderUnlockedApplicants();
                setupPagination();
                setupUnlockedPagination();
            });
            
            // Close job modal
            closeJobBtn.addEventListener('click', () => {
                closeJobModal.classList.add('active');
            });
            
            cancelCloseBtn.addEventListener('click', () => {
                closeJobModal.classList.remove('active');
            });
            
            // FIXED: Close job and redirect to dashboard
            confirmCloseBtn.addEventListener('click', () => {
                closeJobModal.classList.remove('active');
                
                // Show success message
                showToast('Job listing closed successfully. Redirecting to dashboard...');
                
                // Redirect to employer dashboard after a delay
                setTimeout(() => {
                    window.location.href = 'employer/employer/employer/employer-dashboard.html';
                }, 1500);
            });
            
            closeJobModal.addEventListener('click', (e) => {
                if (e.target === closeJobModal) {
                    closeJobModal.classList.remove('active');
                }
            });
>>>>>>> a46c0ab3e7d0fbef1797e5e03243290afa309047:employer/view-applicants.html
        }

        // Update UI
        const card = document.querySelector(
          `.applicant-card[data-id="${applicantId}"]`,
        );
        if (card) {
          card.classList.toggle("selected");
        }

        updateCheckoutSummary();
      }

      function updateCheckoutSummary() {
        const count = selectedApplicants.size;
        const total = count * APPLICANT_PRICE;

        selectedCount.textContent = count;
        totalAmount.textContent = `₵${total}.00`;

        if (count > 0) {
          checkoutSummary.classList.add("show");
        } else {
          checkoutSummary.classList.remove("show");
        }
      }

      function moveApplicantsToUnlocked() {
        const selectedIds = Array.from(selectedApplicants);

        selectedIds.forEach((applicantId) => {
          const index = allApplicants.findIndex(
            (app) => app.id === applicantId,
          );
          if (index !== -1) {
            const applicant = allApplicants[index];
            applicant.unlocked = true;
            unlockedApplicants.push(applicant);
            allApplicants.splice(index, 1);
          }
        });

        // Update filtered arrays
        filteredApplicants = allApplicants.filter((applicant) =>
          matchesSearch(applicant, searchInput.value.toLowerCase().trim()),
        );
        filteredUnlockedApplicants = unlockedApplicants.filter((applicant) =>
          matchesSearch(applicant, searchInput.value.toLowerCase().trim()),
        );

        // Clear selection
        selectedApplicants.clear();

        // Update UI
        loadJobData();
        renderApplicants();
        renderUnlockedApplicants();
        setupPagination();
        setupUnlockedPagination();
        updateCheckoutSummary();

        // Show success message
        showToast(`${selectedIds.length} applicant(s) unlocked successfully!`);
      }

      function matchesSearch(applicant, searchTerm) {
        if (!searchTerm) return true;

        return (
          applicant.name.toLowerCase().includes(searchTerm) ||
          applicant.fullName.toLowerCase().includes(searchTerm) ||
          applicant.fieldOfStudy.toLowerCase().includes(searchTerm) ||
          applicant.region.toLowerCase().includes(searchTerm) ||
          (applicant.email &&
            applicant.email.toLowerCase().includes(searchTerm))
        );
      }

      function setupEventListeners() {
        // Tab switching
        tabs.forEach((tab) => {
          tab.addEventListener("click", () => {
            const tabId = tab.dataset.tab;
            switchTab(tabId);
          });
        });

        // Clear selection
        clearSelectionBtn.addEventListener("click", () => {
          selectedApplicants.clear();
          document.querySelectorAll(".applicant-card").forEach((card) => {
            card.classList.remove("selected");
          });
          updateCheckoutSummary();
        });

        // Proceed to payment - FIXED PAYMENT DATA PASSING
        proceedToPaymentBtn.addEventListener("click", () => {
          if (selectedApplicants.size === 0) {
            showToast("Please select at least one applicant to unlock");
            return;
          }

          // Calculate total amount
          const totalAmount = selectedApplicants.size * APPLICANT_PRICE;

          // Store payment data in sessionStorage
          const paymentData = {
            jobId: currentJobId,
            jobTitle: jobTitleElement.textContent,
            amount: totalAmount,
            selectedCount: selectedApplicants.size,
            applicantPrice: APPLICANT_PRICE,
            selectedApplicants: Array.from(selectedApplicants),
            timestamp: new Date().toISOString(),
          };

          // Store in sessionStorage for payment page
          sessionStorage.setItem(
            "jobassist_payment_data",
            JSON.stringify(paymentData),
          );

          // Redirect to payment page
          window.location.href = `employer-payment.html?jobId=${currentJobId}&amount=${totalAmount}&count=${selectedApplicants.size}`;
        });

        // Search
        searchInput.addEventListener("input", () => {
          const searchTerm = searchInput.value.toLowerCase().trim();

          // Filter all applicants
          filteredApplicants = allApplicants.filter((applicant) =>
            matchesSearch(applicant, searchTerm),
          );

          // Filter unlocked applicants
          filteredUnlockedApplicants = unlockedApplicants.filter((applicant) =>
            matchesSearch(applicant, searchTerm),
          );

          // Reset to first page
          currentPage = 1;
          currentUnlockedPage = 1;

          // Re-render
          renderApplicants();
          renderUnlockedApplicants();
          setupPagination();
          setupUnlockedPagination();
        });

        // Close job modal
        closeJobBtn.addEventListener("click", () => {
          closeJobModal.classList.add("active");
        });

        cancelCloseBtn.addEventListener("click", () => {
          closeJobModal.classList.remove("active");
        });

        // FIXED: Close job and redirect to dashboard
        confirmCloseBtn.addEventListener("click", () => {
          closeJobModal.classList.remove("active");

          // Show success message
          showToast(
            "Job listing closed successfully. Redirecting to dashboard...",
          );

          // Redirect to employer dashboard after a delay
          setTimeout(() => {
            window.location.href = "employer-dashboard.html";
          }, 1500);
        });

        closeJobModal.addEventListener("click", (e) => {
          if (e.target === closeJobModal) {
            closeJobModal.classList.remove("active");
          }
        });
      }

      function switchTab(tabId) {
        // Update tabs
        tabs.forEach((tab) => tab.classList.remove("active"));
        tabContents.forEach((content) => content.classList.remove("active"));

        // Activate selected tab
        document
          .querySelector(`.tab[data-tab="${tabId}"]`)
          .classList.add("active");
        document.getElementById(`${tabId}-tab`).classList.add("active");
      }

      function showToast(message) {
        // Create toast
        const toast = document.createElement("div");
        toast.style.cssText = `
                position: fixed;
                bottom: 25px;
                right: 30px;
                background: var(--primary);
                color: white;
                padding: 12px 20px;
                border-radius: 6px;
                box-shadow: 0 4px 12px rgba(0,0,0,0.15);
                z-index: 1001;
                font-weight: 600;
                transform: translateY(20px);
                opacity: 0;
                transition: all 0.3s ease;
            `;
        toast.textContent = message;
        document.body.appendChild(toast);

        // Animate in
        setTimeout(() => {
          toast.style.transform = "translateY(0)";
          toast.style.opacity = "1";
        }, 10);

        // Remove after 3 seconds
        setTimeout(() => {
          toast.style.transform = "translateY(20px)";
          toast.style.opacity = "0";
          setTimeout(() => toast.remove(), 300);
        }, 3000);
      }
    </script>
  </body>
</html>
